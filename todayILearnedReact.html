<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>수영의 TIL</title>
</head>
<body>
<h1>React</h1>
<p>
  npm i react-hook-form 
  useform 선언하기
const {register,watch,handleSubmit...}=useForm();
.
.
.
validation
<form...>
<input ...{}//useForm범위 onSubmit={handleSubmit(onValid)}//Html범위>
html범위에 유효성검사를 해도 되지만, 사용자의 브라우저나 버전 등등에 
지원이 안되는 경우를 대비해  useForm의 범위에서 사용
  
  </p>
  <hr/>
  <h1>react hook form을 이용해서 사용자의 정보를 받는 form 만들기</h1>
  <p>interface IForm{
    name:string;
    email:string;
    userName:string;
    password:string;
    passwordConfirm:string;
    extraError?:string;

}

function ToDoList(){
    const {register,handleSubmit,formState:{errors},setError,
}=useForm<IForm>(
    {
        defaultValues:{
            email:"@naver.com",
        }
    }
    );
    const onValid = (data:any)=>{
        if(data.password !== data.passwordConfirm){
            setError("passwordConfirm",{message:"password are not the same."},{shouldFocus:true});
        }
        // setError("extraError",{message:"Server offline."});
    }
    console.log(errors);
    return(
       <div>
    <form style={{display:"flex",flexDirection:"column"}} onSubmit={handleSubmit(onValid)}>
    
    <input {...register("name",{
                    required:"write here",
                    validate: {
                        noRiver:(value)=>
                        value.includes("river") ? "no river allowed" : true,
                        noRiva:(value)=>
                        value.includes("riva") ? "no riva allowed" : true,
                    },
                    })} placeholder="Name"/>
                      <span>
        {errors?.name?.message}
    </span>

    <input {...register("email",{
        required:"Email is required",
        pattern:{
            value:/^[A-Za-z0-9._%+-]+@naver.com$/,
            message:"Only naver.com allowed",
        }
    })} placeholder="Email"/>
    <span>
        {errors?.email?.message}
    </span>
    <input {...register("userName",{required:true,minLength:10})} placeholder="userName"/>
    <span>
        {errors?.userName?.message}
    </span>
    <input {...register("password",{required:'password is required',minLength:{
        value:5,
        message:"It's too short.",
    }})} placeholder="password"/>
      <span>
        {errors?.password?.message}
    </span>
    <input {...register("passwordConfirm",{required:true,minLength:10})} placeholder="passwordConfirm"/>
    <span>
        {errors?.passwordConfirm?.message}
    </span>
        {/* <input {...register("toDo")} placeholder="Write a to do"/> */}
        <button>Add</button>
        <span>{errors?.extraError?.message}</span>
    </form>
    </div>
    )
}</p>
    <hr/>
<p>  React-router-dom

React-router 시작하기

Npm i react-router-dom

App.js
Import {HashRouter,Route}from “react-router-dom”;

Function App(){
	return
 <HashRouter>
	<Route path=“home/” component={Home}/>
	<Route path=“/about” component={About}/>
	//path와 component는 이름이 같을 필요는 없다.
</HashRouter>
}

//case1:
Function App(){
	return
 <HashRouter>
	<Route path=“home/”>
		<h1>Home</h1>
	</Route>
	<Route path=“home/intro”><h1>HomeIntro</h1></Route>
	//home/intro 접속시 home과 homeintro 두 개 다 렌더링됨
	<Route path=“/about”><h1>About</h1><Route/>
</HashRouter>
}
Solution of the case 1:
<Route path =“/” exact={true} component={Home}>
//정확하게 path가 일치하는 것만 렌더
*버전업후에 HashRouter -> BrowserRouter, component->element
Route를 Routes로 감싸줘야함

페이지 이동을 위한 Navigation

Navigation.js

Import {Link} from “react-router-dom”;
Function Navigation(){
	Return(
		<div>
			<Link to=“/“>Home</Link>
			<Link to=“/about”>About</Link>
		</div>	
	)
}

App.js
…
Import Navigation from “~~~”;

Function App(){
	return
 <HashRouter>
<Navigation/> // Link는 반드시 Routes안에 있어야 작동됨
	<Route path=“home/”>
		<h1>Home</h1>
	</Route>
	<Route path=“home/intro”><h1>HomeIntro</h1></Route>
	<Route path=“/about”><h1>About</h1><Route/>
</HashRouter>
}

Routes 간에 props공유

Function App(){
	return
 <HashRouter>
	<Route path=“home/”>
		<h1>Home</h1>
	</Route>
	<Route path=“home/intro”><h1>HomeIntro</h1></Route>
	<Route path={
				{
					pathname:”/about”,
					state:{fromNavigation:true
						}
				}
		}><h1>About</h1><Route/>
</HashRouter>
}
   </p>
   <hr/>
</body>

</html>
